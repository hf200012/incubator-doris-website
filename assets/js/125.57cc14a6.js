(window.webpackJsonp=window.webpackJsonp||[]).push([[125],{579:function(t,s,a){"use strict";a.r(s);var e=a(56),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"use-flink-cdc-to-realize-real-time-mysql-data-into-apache-doris"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#use-flink-cdc-to-realize-real-time-mysql-data-into-apache-doris"}},[t._v("#")]),t._v(" Use Flink CDC to realize real-time MySQL data into Apache Doris")]),t._v(" "),a("p",[t._v("This article uses examples to demonstrate how to use Flink CDC and Doris' Flink Connector to monitor data from the Mysql database and store it in the corresponding table of the Doris data warehouse in real time.")]),t._v(" "),a("h2",{attrs:{id:"_1-what-is-cdc"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-what-is-cdc"}},[t._v("#")]),t._v(" 1. What is CDC")]),t._v(" "),a("p",[t._v("CDC is the abbreviation of Change Data Capture technology. It can record incremental changes of the source database (Source) and synchronize it to one or more data destinations (Sink). In the synchronization process, you can also perform certain processing on the data, such as grouping (GROUP BY), multi-table association (JOIN), and so on.")]),t._v(" "),a("p",[t._v("For example, for an e-commerce platform, a userâ€™s order will be written to a source database in real time; Department A needs to simply aggregate the real-time data every minute and then save it to Redis for query, and Department B needs to temporarily store the data of the day in Elasticsearch will use a copy for report display, and Department C also needs a copy of data to ClickHouse for real-time data warehouse. As time goes by, the subsequent D and E departments will also have data analysis requirements. In this scenario, the traditional copying and distributing multiple copies is very inflexible, while CDC can realize a change record, process and deliver it in real time To multiple destinations.")]),t._v(" "),a("h3",{attrs:{id:"_1-1-application-scenarios-of-cdc"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-application-scenarios-of-cdc"}},[t._v("#")]),t._v(" 1.1 Application Scenarios of CDC")]),t._v(" "),a("p",[t._v("-**Data synchronization: **Used for backup and disaster recovery;\n-"),a("strong",[t._v("Data distribution:")]),t._v(" One data source is distributed to multiple downstream systems;\n-"),a("strong",[t._v("Data Collection:")]),t._v(" ETL data integration for data warehouse/data lake is a very important data source.")]),t._v(" "),a("p",[t._v("There are many technical solutions for CDC, and the current mainstream implementation mechanisms in the industry can be divided into two types:")]),t._v(" "),a("p",[t._v("-CDC based on query:\n-Offline scheduling query jobs, batch processing. Synchronize a table to other systems, and obtain the latest data in the table through query each time;\n-Data consistency cannot be guaranteed, and the data may have been changed many times during the inspection process;\n-Real-time performance is not guaranteed, and there is a natural delay based on offline scheduling.\n-Log-based CDC:\n-Real-time consumption log, stream processing, for example, MySQL's binlog log completely records the changes in the database, and the binlog file can be used as the data source of the stream;\n-Ensure data consistency, because the binlog file contains details of all historical changes;\n-Guarantee real-time performance, because log files like binlog can be streamed for consumption and provide real-time data.")]),t._v(" "),a("h2",{attrs:{id:"_2-flink-cdc"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-flink-cdc"}},[t._v("#")]),t._v(" 2.Flink CDC")]),t._v(" "),a("p",[t._v("Flink added the feature of CDC in version 1.11, referred to as change data capture. The name is a bit messy, let's look at the content of CDC from the previous data structure.")]),t._v(" "),a("p",[t._v("The above is the log processing flow of the previous "),a("code",[t._v("mysq binlog")]),t._v(", for example, canal listens to binlog and writes the log to Kafka. And Apache Flink consumes Kakfa data in real time to achieve mysql data synchronization or other content. As a whole, it can be divided into the following stages.")]),t._v(" "),a("ol",[a("li",[t._v("mysql open binlog")]),t._v(" "),a("li",[t._v("Canal synchronize binlog data write to kafka")]),t._v(" "),a("li",[t._v("Flink reads the binlog data in kakfa for related business processing.")])]),t._v(" "),a("p",[t._v("The overall processing link is longer and requires more components. Apache Flink CDC can obtain binlog directly from the database for downstream business calculation analysis")]),t._v(" "),a("h3",{attrs:{id:"_2-1-flink-connector-mysql-cdc-2-0-features"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-flink-connector-mysql-cdc-2-0-features"}},[t._v("#")]),t._v(" 2.1 Flink Connector Mysql CDC 2.0 Features")]),t._v(" "),a("p",[t._v("Provide MySQL CDC 2.0, core features include")]),t._v(" "),a("p",[t._v("-Concurrent reading, the reading performance of the full amount of data can be horizontally expanded;\n-No locks throughout the process, no risk of locks on online business;\n-Resumable transfers at breakpoints, support full-stage checkpoints.")]),t._v(" "),a("p",[t._v("There are test documents on the Internet showing that the customer table in the TPC-DS data set was used for testing. The Flink version is 1.13.1, the data volume of the customer table is 65 million, the Source concurrency is 8, and the full read stage:")]),t._v(" "),a("p",[t._v("-MySQL CDC 2.0 takes "),a("strong",[t._v("13")]),t._v(" minutes;\n-MySQL CDC 1.4 takes "),a("strong",[t._v("89")]),t._v(" minutes;\n-Reading performance improved by "),a("strong",[t._v("6.8")]),t._v(" times.")]),t._v(" "),a("h2",{attrs:{id:"_3-what-is-doris-flink-connector"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-what-is-doris-flink-connector"}},[t._v("#")]),t._v(" 3. What is Doris Flink Connector")]),t._v(" "),a("p",[t._v("Flink Doris Connector is an extension of the doris community in order to facilitate users to use Flink to read and write Doris data tables.")]),t._v(" "),a("p",[t._v("Currently doris supports Flink 1.11.x, 1.12.x, 1.13.x, Scala version: 2.12.x")]),t._v(" "),a("p",[t._v("Currently, the Flink doris connector currently controls the warehousing through two parameters:")]),t._v(" "),a("ol",[a("li",[t._v("sink.batch.size: How many pieces are written once, the default is 100 pieces")]),t._v(" "),a("li",[t._v("sink.batch.interval: how many seconds to write each time, the default is 1 second")])]),t._v(" "),a("p",[t._v("These two parameters work at the same time, and that condition will trigger the write doris table operation when the condition comes first.")]),t._v(" "),a("p",[a("strong",[t._v("Notice:")])]),t._v(" "),a("p",[a("strong",[t._v("Note")]),t._v(" here is to enable the http v2 version, specifically configure "),a("code",[t._v("enable_http_server_v2=true")]),t._v(" in fe.conf, and because the be list is obtained through fe http rest api, the users who need to be configured have admin permissions.")]),t._v(" "),a("h2",{attrs:{id:"_4-usage-example"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-usage-example"}},[t._v("#")]),t._v(" 4. Usage example")]),t._v(" "),a("h3",{attrs:{id:"_4-1-flink-doris-connector-compilation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-flink-doris-connector-compilation"}},[t._v("#")]),t._v(" 4.1 Flink Doris Connector compilation")]),t._v(" "),a("p",[t._v("First, we need to compile Doris's Flink connector, which can also be downloaded from the following address:")]),t._v(" "),a("p",[t._v("https://github.com/hf200012/hf200012.github.io/raw/main/lib/doris-flink-1.0-SNAPSHOT.jar")]),t._v(" "),a("blockquote",[a("p",[t._v("Note:")]),t._v(" "),a("p",[t._v("Here because Doris' Flink Connector is developed based on Scala 2.12.x version, so when you use Flink, please choose the version corresponding to Scala 2.12.")]),t._v(" "),a("p",[t._v("If you downloaded the corresponding jar using the above address, please ignore the compiled content part below")])]),t._v(" "),a("p",[t._v("Compile under the doris docker compilation environment "),a("code",[t._v("apache/incubator-doris:build-env-1.2")]),t._v(", because the JDK version below 1.3 is 11, there will be compilation problems.")]),t._v(" "),a("p",[t._v("Execute in the extension/flink-doris-connector/ source directory:")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("sh build.sh\n")])])]),a("p",[t._v("After the compilation is successful, the file "),a("code",[t._v("doris-flink-1.0.0-SNAPSHOT.jar")]),t._v(" will be generated in the "),a("code",[t._v("output/")]),t._v(" directory. Copy this file to the "),a("code",[t._v("ClassPath")]),t._v(" of "),a("code",[t._v("Flink")]),t._v(" to use "),a("code",[t._v("Flink-Doris-Connector")]),t._v(". For example, for "),a("code",[t._v("Flink")]),t._v(" running in "),a("code",[t._v("Local")]),t._v(" mode, put this file in the "),a("code",[t._v("jars/")]),t._v(" folder. For "),a("code",[t._v("Flink")]),t._v(" running in "),a("code",[t._v("Yarn")]),t._v(" cluster mode, put this file into the pre-deployment package.")]),t._v(" "),a("p",[a("strong",[t._v("For Flink 1.13.x version adaptation issues")])]),t._v(" "),a("div",{staticClass:"language-xml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[t._v("   "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("properties")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("scala.version")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("2.12"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("scala.version")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("flink.version")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("1.11.2"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("flink.version")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("libthrift.version")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("0.9.3"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("libthrift.version")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("arrow.version")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("0.15.1"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("arrow.version")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("project.build.sourceEncoding")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("UTF-8"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("project.build.sourceEncoding")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("doris.home")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("${basedir}/../../"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("doris.home")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("doris.thirdparty")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("${basedir}/../../thirdparty"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("doris.thirdparty")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("properties")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),a("p",[t._v("Just change the "),a("code",[t._v("flink.version")]),t._v(" here to be the same as your Flink cluster version, and edit again")]),t._v(" "),a("h3",{attrs:{id:"_4-2-configure-flink"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-configure-flink"}},[t._v("#")]),t._v(" 4.2 Configure Flink")]),t._v(" "),a("p",[t._v("Here we use Flink Sql Client to operate.")]),t._v(" "),a("p",[t._v("Here we demonstrate the software version used:")]),t._v(" "),a("ol",[a("li",[t._v("Mysql 8.x")]),t._v(" "),a("li",[t._v("Apache Flink: 1.13.3")]),t._v(" "),a("li",[t._v("Apache Doris: 0.14.13.1")])]),t._v(" "),a("h4",{attrs:{id:"_4-2-1-install-flink"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-1-install-flink"}},[t._v("#")]),t._v(" 4.2.1 Install Flink")]),t._v(" "),a("p",[t._v("First download and install Flink:")]),t._v(" "),a("p",[t._v("https://dlcdn.apache.org/flink/flink-1.13.3/flink-1.13.3-bin-scala_2.12.tgz")]),t._v(" "),a("p",[t._v("Download Flink CDC related Jar packages:")]),t._v(" "),a("p",[t._v("https://repo1.maven.org/maven2/com/ververica/flink-connector-mysql-cdc/2.0.2/flink-connector-mysql-cdc-2.0.2.jar")]),t._v(" "),a("p",[t._v("Pay attention to the version correspondence between Flink CDC and Flink here")]),t._v(" "),a("img",{attrs:{src:t.$withBase("/images/blogs/flink-cdc-to-doris/image-20211025170642628.png"),alt:""}}),t._v(" "),a("p",[t._v("-Copy the Flink Doris Connector jar package downloaded or compiled above to the lib directory under the Flink root directory\n-The Flink cdc jar package is also copied to the lib directory under the Flink root directory")]),t._v(" "),a("p",[t._v("The demonstration here uses the local stand-alone mode,")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# wget https://dlcdn.apache.org/flink/flink-1.13.3/flink-1.13.3-bin-scala_2.12.tgz")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# tar zxvf flink-1.13.3-bin-scala_2.12.tgz")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# cd flink-1.13.3")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# wget https://repo1.maven.org/maven2/com/ververica/flink-connector-mysql-cdc/2.0.2/flink-connector-mysql-cdc-2.0.2.jar -P ./lib/")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# wget https://github.com/hf200012/hf200012.github.io/raw/main/lib/doris-flink-1.0-SNAPSHOT.jar -P ./lib/")]),t._v("\n")])])]),a("img",{attrs:{src:t.$withBase("/images/blogs/flink-cdc-to-doris/image-20211026095513892.png"),alt:""}}),t._v(" "),a("h4",{attrs:{id:"_4-2-2-start-flink"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-2-start-flink"}},[t._v("#")]),t._v(" 4.2.2 Start Flink")]),t._v(" "),a("p",[t._v("Here we are using the local stand-alone mode")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("# bin/start-cluster.sh\nStarting cluster.\nStarting standalonesession daemon on host doris01.\nStarting taskexecutor daemon on host doris01.\n")])])]),a("p",[t._v("We start the Flink cluster through web access (the default port is 8081), and we can see that the cluster starts normally")]),t._v(" "),a("img",{attrs:{src:t.$withBase("/images/blogs/flink-cdc-to-doris/image-20211025162831632.png"),alt:""}}),t._v(" "),a("h3",{attrs:{id:"_4-3-install-apache-doris"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-install-apache-doris"}},[t._v("#")]),t._v(" 4.3 Install Apache Doris")]),t._v(" "),a("p",[t._v("For the specific method of installing and deploying Doris, refer to the following link:")]),t._v(" "),a("p",[t._v("https://hf200012.github.io/2021/09/Apache-Doris-Environment installation and deployment")]),t._v(" "),a("h3",{attrs:{id:"_4-3-installation-and-configuration-mysql"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-installation-and-configuration-mysql"}},[t._v("#")]),t._v(" 4.3 Installation and Configuration Mysql")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("Install Mysql")]),t._v(" "),a("p",[t._v("Quickly use Docker to install and configure Mysql, refer to the following link for details")]),t._v(" "),a("p",[t._v("https://segmentfault.com/a/1190000021523570")])]),t._v(" "),a("li",[a("p",[t._v("Open Mysql binlog")]),t._v(" "),a("p",[t._v("Enter the Docker container to modify the /etc/my.cnf file, and add the following content under [mysqld],")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("log_bin=mysql_bin\nbinlog-format=Row\nserver-id=1\n")])])]),a("p",[t._v("Then restart Mysql")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("systemctl restart mysqld\n")])])])]),t._v(" "),a("li",[a("p",[t._v("Create Mysql database table")])])]),t._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CREATE")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("TABLE")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token identifier"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("test_cdc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token identifier"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("NOT")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("AUTO_INCREMENT")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token identifier"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("varchar")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("255")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("DEFAULT")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("PRIMARY")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("KEY")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token identifier"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ENGINE")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("InnoDB")]),t._v("\n")])])]),a("h3",{attrs:{id:"_4-4-create-doris-table"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-4-create-doris-table"}},[t._v("#")]),t._v(" 4.4 Create doris table")]),t._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CREATE")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("TABLE")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token identifier"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("doris_test"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token identifier"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COMMENT")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token identifier"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("varchar")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COMMENT")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ENGINE")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("OLAP\n "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("UNIQUE")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("KEY")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token identifier"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COMMENT")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"OLAP"')]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("DISTRIBUTED")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("BY")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("HASH")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token identifier"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" BUCKETS "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n PROPERTIES "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"replication_num"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"3"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"in_memory"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"false"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"storage_format"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"V2"')]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h3",{attrs:{id:"_4-5-start-flink-sql-client"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-5-start-flink-sql-client"}},[t._v("#")]),t._v(" 4.5 Start Flink Sql Client")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("./bin/sql-client.sh embedded\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" execution.result-mode"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("tableau"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("img",{attrs:{src:t.$withBase("/images/blogs/flink-cdc-to-doris/image-20211025165547903.png"),alt:""}}),t._v(" "),a("h4",{attrs:{id:"_4-5-1-create-flink-cdc-mysql-mapping-table"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-5-1-create-flink-cdc-mysql-mapping-table"}},[t._v("#")]),t._v(" 4.5.1 Create Flink CDC Mysql mapping table")]),t._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CREATE")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("TABLE")]),t._v(" test_flink_cdc "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  id "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INT")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  name STRING"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("primary")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("key")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("NOT")]),t._v(" ENFORCED\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("WITH")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'connector'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mysql-cdc'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'hostname'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'localhost'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'port'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'3306'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'username'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'root'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'password'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'password'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'database-name'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'demo'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'table-name'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'test_cdc'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("The Mysql mapping table created by the query is displayed normally")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("select * from test_flink_cdc;\n")])])]),a("img",{attrs:{src:t.$withBase("/images/blogs/flink-cdc-to-doris/image-20211026100505972.png"),alt:""}}),t._v(" "),a("h4",{attrs:{id:"_4-5-2-create-flink-doris-table-mapping-table"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-5-2-create-flink-doris-table-mapping-table"}},[t._v("#")]),t._v(" 4.5.2 Create Flink Doris Table Mapping Table")]),t._v(" "),a("p",[t._v("Use Doris Flink Connector to create Doris mapping table")]),t._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CREATE")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("TABLE")]),t._v(" doris_test_sink "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n   id "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INT")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n   name STRING\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("WITH")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'connector'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'doris'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'fenodes'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'localhost:8030'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'table.identifier'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'db_audit.doris_test'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'sink.batch.size'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'2'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'sink.batch.interval'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'1'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'username'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'root'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'password'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("Execute the above statement on the command line, you can see that the table is created successfully, and then execute the query statement to verify whether it is normal")]),t._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" doris_test_sink"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("img",{attrs:{src:t.$withBase("/images/blogs/flink-cdc-to-doris/image-20211026100804091.png"),alt:""}}),t._v(" "),a("p",[t._v("Perform an insert operation, insert the data in Mysql into Doris through Flink CDC combined with Doris Flink Connector")]),t._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INSERT")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INTO")]),t._v(" doris_test_sink "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("name "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" test_flink_cdc\n")])])]),a("img",{attrs:{src:t.$withBase("/images/blogs/flink-cdc-to-doris/image-20211026101004547.png"),alt:""}}),t._v(" "),a("p",[t._v("After the submission is successful, we can see the related job task information on the Flink web interface")]),t._v(" "),a("img",{attrs:{src:t.$withBase("/images/blogs/flink-cdc-to-doris/image-20211026100943474.png"),alt:""}}),t._v(" "),a("h4",{attrs:{id:"_4-5-3-insert-data-into-mysql-table"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-5-3-insert-data-into-mysql-table"}},[t._v("#")]),t._v(" 4.5.3 Insert data into Mysql table")]),t._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INSERT")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INTO")]),t._v(" test_cdc "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("VALUES")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("123")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'this is a update'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INSERT")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INTO")]),t._v(" test_cdc "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("VALUES")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1212")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Test flink CDC'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INSERT")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INTO")]),t._v(" test_cdc "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("VALUES")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1234")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'This is a test'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INSERT")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INTO")]),t._v(" test_cdc "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("VALUES")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("11233")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'zhangfeng_1'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INSERT")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INTO")]),t._v(" test_cdc "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("VALUES")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("21233")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'zhangfeng_2'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INSERT")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INTO")]),t._v(" test_cdc "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("VALUES")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("31233")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'zhangfeng_3'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INSERT")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INTO")]),t._v(" test_cdc "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("VALUES")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("41233")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'zhangfeng_4'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INSERT")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INTO")]),t._v(" test_cdc "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("VALUES")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("51233")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'zhangfeng_5'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INSERT")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INTO")]),t._v(" test_cdc "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("VALUES")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("61233")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'zhangfeng_6'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INSERT")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INTO")]),t._v(" test_cdc "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("VALUES")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("71233")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'zhangfeng_7'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INSERT")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INTO")]),t._v(" test_cdc "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("VALUES")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("81233")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'zhangfeng_8'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INSERT")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INTO")]),t._v(" test_cdc "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("VALUES")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("91233")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'zhangfeng_9'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h4",{attrs:{id:"_4-5-4-observe-the-data-in-the-doris-table"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-5-4-observe-the-data-in-the-doris-table"}},[t._v("#")]),t._v(" 4.5.4 Observe the data in the Doris table")]),t._v(" "),a("p",[t._v("First stop the Insert into task, because I am in the local stand-alone mode, there is only one task task, so I have to stop it, and then execute the query statement on the command line to see the data")]),t._v(" "),a("img",{attrs:{src:t.$withBase("/images/blogs/flink-cdc-to-doris/image-20211026101203629.png"),alt:""}}),t._v(" "),a("h4",{attrs:{id:"_4-5-5-modify-mysql-data"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-5-5-modify-mysql-data"}},[t._v("#")]),t._v(" 4.5.5 Modify Mysql data")]),t._v(" "),a("p",[t._v("Restart the Insert into task")]),t._v(" "),a("img",{attrs:{src:t.$withBase("/images/blogs/flink-cdc-to-doris/image-20211025182341086.png"),alt:""}}),t._v(" "),a("p",[t._v("Modify the data in the Mysql table")]),t._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("update")]),t._v(" test_cdc "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("set")]),t._v(" name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'This is an operation to verify the modification'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("where")]),t._v(" id "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("123")]),t._v("\n")])])]),a("p",[t._v("Look at the data in the Doris table again, you will find that it has been modified")]),t._v(" "),a("p",[t._v("Note that if you want to modify the data in the Mysql table, the data in Doris is also modified. If the model of the Doris data table is a unique key model, other data models (Aggregate Key and Duplicate Key) cannot update data.")]),t._v(" "),a("img",{attrs:{src:t.$withBase("/images/blogs/flink-cdc-to-doris/image-20211025182435827.png"),alt:""}}),t._v(" "),a("h4",{attrs:{id:"_4-5-6-delete-data-operation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-5-6-delete-data-operation"}},[t._v("#")]),t._v(" 4.5.6 Delete data operation")]),t._v(" "),a("p",[t._v("Currently Doris Flink Connector does not support delete operation, it is planned to add this operation later")])])}),[],!1,null,null,null);s.default=n.exports}}]);