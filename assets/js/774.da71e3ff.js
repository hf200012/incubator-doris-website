(window.webpackJsonp=window.webpackJsonp||[]).push([[774],{1227:function(e,a,t){"use strict";t.r(a);var s=t(56),n=Object(s.a)({},(function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"发布-doris-core"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#发布-doris-core"}},[e._v("#")]),e._v(" 发布 Doris Core")]),e._v(" "),t("p",[e._v("Doris Core 指发布 https://github.com/apache/incubator-doris 中的内容。")]),e._v(" "),t("h2",{attrs:{id:"准备发布"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#准备发布"}},[e._v("#")]),e._v(" 准备发布")]),e._v(" "),t("p",[e._v("首先，请参阅 "),t("RouterLink",{attrs:{to:"/zh-CN/community/release-and-verify/release-prepare.html"}},[e._v("发版准备")]),e._v(" 文档进行发版准备。")],1),e._v(" "),t("h3",{attrs:{id:"准备分支"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#准备分支"}},[e._v("#")]),e._v(" 准备分支")]),e._v(" "),t("p",[e._v("发布前需要先新建一个分支。例如：")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("$ git checkout -b branch-0.9\n")])])]),t("p",[e._v("这个分支要进行比较充分的测试，使得功能可用，bug收敛，重要bug都得到修复。\n这个过程需要等待社区，看看是否有必要的patch需要在这个版本合入，如果有，需要把它 cherry-pick 到发布分支。")]),e._v(" "),t("h3",{attrs:{id:"清理issue"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#清理issue"}},[e._v("#")]),e._v(" 清理issue")]),e._v(" "),t("p",[e._v("将属于这个版本的所有 issue 都过一遍，关闭已经完成的，如果没法完成的，推迟到更晚的版本。")]),e._v(" "),t("h3",{attrs:{id:"合并必要的patch"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#合并必要的patch"}},[e._v("#")]),e._v(" 合并必要的Patch")]),e._v(" "),t("p",[e._v("在发布等待过程中，可能会有比较重要的Patch合入，如果社区有人说要有重要的Bug需要合入，那么 Release Manager 需要评估并将重要的Patch合入到发布分支中。")]),e._v(" "),t("h2",{attrs:{id:"验证分支"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#验证分支"}},[e._v("#")]),e._v(" 验证分支")]),e._v(" "),t("h3",{attrs:{id:"稳定性测试"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#稳定性测试"}},[e._v("#")]),e._v(" 稳定性测试")]),e._v(" "),t("p",[e._v("将打好的分支交给 QA 同学进行稳定性测试。如果在测试过程中，出现需要修复的问题，则如果在测试过程中，出现需要修复的问题，待修复好后，需要将修复问题的 PR 合入到待发版本的分支中。")]),e._v(" "),t("p",[e._v("待整个分支稳定后，才能准备发版本。")]),e._v(" "),t("h3",{attrs:{id:"编译验证"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#编译验证"}},[e._v("#")]),e._v(" 编译验证")]),e._v(" "),t("p",[e._v("请参阅编译文档进行编译，以确保源码编译正确性。")]),e._v(" "),t("h3",{attrs:{id:"准备-release-nodes"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#准备-release-nodes"}},[e._v("#")]),e._v(" 准备 Release Nodes")]),e._v(" "),t("h2",{attrs:{id:"社区发布投票流程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#社区发布投票流程"}},[e._v("#")]),e._v(" 社区发布投票流程")]),e._v(" "),t("h3",{attrs:{id:"打-tag"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#打-tag"}},[e._v("#")]),e._v(" 打 tag")]),e._v(" "),t("p",[e._v("当上述分支已经比较稳定后，就可以在此分支上打 tag。\n记得在创建 tag 时，修改 "),t("code",[e._v("gensrc/script/gen_build_version.sh")]),e._v(" 中的 "),t("code",[e._v("build_version")]),e._v(" 变量。如 "),t("code",[e._v('build_version="0.10.0-release"')])]),e._v(" "),t("p",[e._v("例如：")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('$ git checkout branch-0.9\n$ git tag -a 0.9.0-rc01 -m "0.9.0 release candidate 01"\n$ git push origin 0.9.0-rc01\nCounting objects: 1, done.\nWriting objects: 100% (1/1), 165 bytes | 0 bytes/s, done.\nTotal 1 (delta 0), reused 0 (delta 0)\nTo git@github.com:apache/incubator-doris.git\n * [new tag]         0.9.0-rc01 -> 0.9.0-rc01\n\n$ git tag\n')])])]),t("h3",{attrs:{id:"打包、签名上传"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#打包、签名上传"}},[e._v("#")]),e._v(" 打包、签名上传")]),e._v(" "),t("p",[e._v("如下步骤，也需要通过 SecureCRT 等终端直接登录用户账户，不能通过 su - user 或者 ssh 转，否则密码输入 box 会显示不出来而报错。")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("$ git checkout 0.9.0-rc01\n\n$ git archive --format=tar 0.9.0-rc01 --prefix=apache-doris-0.9.0-incubating-src/ | gzip > apache-doris-0.9.0-incubating-src.tar.gz\n\n$ gpg -u xxx@apache.org --armor --output apache-doris-0.9.0-incubating-src.tar.gz.asc --detach-sign apache-doris-0.9.0-incubating-src.tar.gz\n\n$ gpg --verify apache-doris-0.9.0-incubating-src.tar.gz.asc apache-doris-0.9.0-incubating-src.tar.gz\n\n$ sha512sum apache-doris-0.9.0-incubating-src.tar.gz > apache-doris-0.9.0-incubating-src.tar.gz.sha512\n\n$ sha512sum --check apache-doris-0.9.0-incubating-src.tar.gz.sha512\n")])])]),t("p",[e._v("然后将打包的内容上传到svn仓库中，首先下载 svn 库：")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("svn co https://dist.apache.org/repos/dist/dev/incubator/doris/\n")])])]),t("p",[e._v("将之前得到的全部文件组织成以下svn路径")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("./doris/\n|-- 0.11.0-rc1\n|   |-- apache-doris-0.11.0-incubating-src.tar.gz\n|   |-- apache-doris-0.11.0-incubating-src.tar.gz.asc\n|   `-- apache-doris-0.11.0-incubating-src.tar.gz.sha512\n`-- KEYS\n")])])]),t("p",[e._v("上传这些文件")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('svn add 0.11.0-rc1\nsvn commit -m "Add 0.11.0-rc1"\n')])])]),t("h3",{attrs:{id:"发邮件到社区-dev-doris-apache-org-进行投票"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#发邮件到社区-dev-doris-apache-org-进行投票"}},[e._v("#")]),e._v(" 发邮件到社区 dev@doris.apache.org 进行投票")]),e._v(" "),t("p",[e._v("[VOTE] Release Apache Doris 0.9.0-incubating-rc01")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("Hi all,\n\nPlease review and vote on Apache Doris 0.9.0-incubating-rc01 release.\n\nThe release candidate has been tagged in GitHub as 0.9.0-rc01, available\nhere:\nhttps://github.com/apache/incubator-doris/releases/tag/0.9.0-rc01\n\nRelease Notes are here:\nhttps://github.com/apache/incubator-doris/issues/1891\n\nThanks to everyone who has contributed to this release.\n\nThe artifacts (source, signature and checksum) corresponding to this release\ncandidate can be found here:\nhttps://dist.apache.org/repos/dist/dev/incubator/doris/0.9/0.9.0-rc1/\n\nThis has been signed with PGP key 33DBF2E0, corresponding to\nlide@apache.org.\nKEYS file is available here:\nhttps://downloads.apache.org/incubator/doris/KEYS\nIt is also listed here:\nhttps://people.apache.org/keys/committer/lide.asc\n\nTo verify and build, you can refer to following link:\nhttp://doris.incubator.apache.org/community/release-and-verify/release-verify.html\n\nThe vote will be open for at least 72 hours.\n[ ] +1 Approve the release\n[ ] +0 No opinion\n[ ] -1 Do not release this package because ...\n\nBest Regards,\nxxx\n\n----\nDISCLAIMER: \nApache Doris (incubating) is an effort undergoing incubation at The\nApache Software Foundation (ASF), sponsored by the Apache Incubator PMC.\n\nIncubation is required of all newly accepted\nprojects until a further review indicates that the\ninfrastructure, communications, and decision making process have\nstabilized in a manner consistent with other successful ASF\nprojects.\n\nWhile incubation status is not necessarily a reflection\nof the completeness or stability of the code, it does indicate\nthat the project has yet to be fully endorsed by the ASF.\n")])])]),t("h3",{attrs:{id:"投票通过后-发-result-邮件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#投票通过后-发-result-邮件"}},[e._v("#")]),e._v(" 投票通过后，发 Result 邮件")]),e._v(" "),t("p",[e._v("[Result][VOTE] Release Apache Doris 0.9.0-incubating-rc01")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("Thanks to everyone, and this vote is now closed.\n\nIt has passed with 4 +1 (binding) votes and no 0 or -1 votes.\n\nBinding:\n+1 Zhao Chun\n+1 xxx\n+1 Li Chaoyong\n+1 Mingyu Chen\n\nBest Regards,\nxxx\n\n")])])]),t("h3",{attrs:{id:"发邮件到-general-incubator-apache-org-进行投票"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#发邮件到-general-incubator-apache-org-进行投票"}},[e._v("#")]),e._v(" 发邮件到 general@incubator.apache.org 进行投票")]),e._v(" "),t("p",[t("strong",[e._v("如非孵化器项目，请跳过")])]),e._v(" "),t("p",[e._v("[VOTE] Release Apache Doris 0.9.0-incubating-rc01")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("Hi all,\n\nPlease review and vote on Apache Doris 0.9.0-incubating-rc01 release.\n\nApache Doris is an MPP-based interactive SQL data warehousing for reporting and analysis.\n\nThe Apache Doris community has voted on and approved this release:\nhttps://lists.apache.org/thread.html/d70f7c8a8ae448bf6680a15914646005c6483564464cfa15f4ddc2fc@%3Cdev.doris.apache.org%3E\n\nThe vote result email thread:\nhttps://lists.apache.org/thread.html/64d229f0ba15d66adc83306bc8d7b7ccd5910ecb7e842718ce6a61da@%3Cdev.doris.apache.org%3E\n\nThe release candidate has been tagged in GitHub as 0.9.0-rc01, available here:\nhttps://github.com/apache/incubator-doris/releases/tag/0.9.0-rc01\n\nThere is no CHANGE LOG file because this is the first release of Apache Doris.\nThanks to everyone who has contributed to this release, and there is a simple release notes can be found here:\nhttps://github.com/apache/incubator-doris/issues/406\n\nThe artifacts (source, signature and checksum) corresponding to this release candidate can be found here:\nhttps://dist.apache.org/repos/dist/dev/incubator/doris/0.9/0.9.0-rc01/\n\nThis has been signed with PGP key 33DBF2E0, corresponding to lide@apache.org.\nKEYS file is available here:\nhttps://downloads.apache.org/incubator/doris/KEYS\nIt is also listed here:\nhttps://people.apache.org/keys/committer/lide.asc\n\nThe vote will be open for at least 72 hours.\n[ ] +1 Approve the release\n[ ] +0 No opinion\n[ ] -1 Do not release this package because ...\n\nTo verify and build, you can refer to following instruction:\n\nFirstly, you must be install and start docker service, and then you could build Doris as following steps:\n\nStep1: Pull the docker image with Doris building environment\n$ docker pull apache/incubator-doris:build-env-1.3.1\nYou can check it by listing images, its size is about 3.28GB.\n\nStep2: Run the Docker image\nYou can run image directly:\n$ docker run -it apache/incubator-doris:build-env-1.3.1\n\nStep3: Download Doris source\nNow you should in docker environment, and you can download Doris source package.\n(If you have downloaded source and it is not in image, you can map its path to image in Step2.)\n$ wget https://dist.apache.org/repos/dist/dev/incubator/doris/0.9/0.9.0-rc01/apache-doris-0.9.0.rc01-incubating-src.tar.gz\n\nStep4: Build Doris\nNow you can decompress and enter Doris source path and build Doris.\n$ tar zxvf apache-doris-0.9.0.rc01-incubating-src.tar.gz\n$ cd apache-doris-0.9.0.rc01-incubating-src\n$ sh build.sh\n\nBest Regards,\nxxx\n\n----\nDISCLAIMER: \nApache Doris (incubating) is an effort undergoing incubation at The\nApache Software Foundation (ASF), sponsored by the Apache Incubator PMC.\n\nIncubation is required of all newly accepted\nprojects until a further review indicates that the\ninfrastructure, communications, and decision making process have\nstabilized in a manner consistent with other successful ASF\nprojects.\n\nWhile incubation status is not necessarily a reflection\nof the completeness or stability of the code, it does indicate\nthat the project has yet to be fully endorsed by the ASF.\n")])])]),t("p",[e._v("邮件的 thread 连接可以在这里找到：")]),e._v(" "),t("p",[t("code",[e._v("https://lists.apache.org/list.html?dev@doris.apache.org")])]),e._v(" "),t("h3",{attrs:{id:"发-result-邮件到-general-incubator-apache-org"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#发-result-邮件到-general-incubator-apache-org"}},[e._v("#")]),e._v(" 发 Result 邮件到 general@incubator.apache.org")]),e._v(" "),t("p",[t("strong",[e._v("如非孵化器项目，请跳过")])]),e._v(" "),t("p",[e._v("[RESULT][VOTE] Release Apache Doris 0.9.0-incubating-rc01")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("Hi,\n\nThanks to everyone, and the vote for releasing Apache Doris 0.9.0-incubating-rc01 is now closed.\n\nIt has passed with 4 +1 (binding) votes and no 0 or -1 votes.\n\nBinding:\n+1 Willem Jiang\n+1 Justin Mclean\n+1 ShaoFeng Shi\n+1 Makoto Yui\n\nThe vote thread:\nhttps://lists.apache.org/thread.html/da05fdd8d84e35de527f27200b5690d7811a1e97d419d1ea66562130@%3Cgeneral.incubator.apache.org%3E\n\nBest Regards,\nxxx\n")])])]),t("h2",{attrs:{id:"完成发布"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#完成发布"}},[e._v("#")]),e._v(" 完成发布")]),e._v(" "),t("p",[e._v("请参阅 "),t("RouterLink",{attrs:{to:"/zh-CN/community/release-and-verify/release-complete.html"}},[e._v("完成发布")]),e._v(" 文档完成所有发布流程。")],1)])}),[],!1,null,null,null);a.default=n.exports}}]);