(window.webpackJsonp=window.webpackJsonp||[]).push([[124],{1715:function(e,t,a){"use strict";a.r(t);var s=a(56),o=Object(s.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("p",[e._v("This tutorial is intended for students who know little or nothing about Docker containerization technology, but want to try to deploy the hottest MPP-OLAP database Apache Doris for fun, or companies with new technical architecture needs, want to deploy a test environment for testing performance, simple build partners, the full text to try to use concise vernacular to enhance readability.")]),e._v(" "),a("p",[e._v('The tutorial starts with questions such as "What system can you compile with?", "How to configure the deployed cluster", "What is Docker", "Installing Docker and basic operations", and finally "How to compile Doris", "Doris quick deployment", etc. The full text is several thousand words, with a practical time of about 3-5 hours.')]),e._v(" "),a("p",[e._v("This tutorial has two deployment modes, one is a multi-server multi-node cluster deployment mode, this mode is generally used for test environment deployment, a high-performance single node production multi-Docker do cluster, this mode is generally used for personal research, two deployment modes tutorial have detailed step-by-step instructions.")]),e._v(" "),a("p",[e._v("The final standard you want to achieve is that even if you do not want to read any text descriptions throughout, just copy the code in the code box in turn, paste and execute in the specified place, you can complete the compilation and deployment of Apache Doris work!")]),e._v(" "),a("p",[e._v("This tutorial will be divided into two parts, which have been tested on three platforms and successfully compiled and deployed~")]),e._v(" "),a("p",[e._v("Translated with www.DeepL.com/Translator (free version)")]),e._v(" "),a("p"),a("div",{staticClass:"table-of-contents"},[a("ul",[a("li",[a("a",{attrs:{href:"#_1-deployment-process"}},[e._v("1 Deployment process")])]),a("li",[a("a",{attrs:{href:"#_2-tutorial-environment-just-view-on-demand"}},[e._v("2 Tutorial environment (just view on demand)")]),a("ul",[a("li",[a("a",{attrs:{href:"#_2-1-linux-environment"}},[e._v("2.1 Linux environment")])]),a("li",[a("a",{attrs:{href:"#_2-2-mac-environment"}},[e._v("2.2 Mac environment")])]),a("li",[a("a",{attrs:{href:"#_2-3-windows-environment"}},[e._v("2.3 Windows environment")])])])]),a("li",[a("a",{attrs:{href:"#_3-docker-awareness-and-deployment"}},[e._v("3 Docker Awareness and Deployment")]),a("ul",[a("li",[a("a",{attrs:{href:"#_3-1-docker-awareness"}},[e._v("3.1 Docker Awareness")])]),a("li",[a("a",{attrs:{href:"#_3-2-docker-deployment"}},[e._v("3.2 Docker deployment")])]),a("li",[a("a",{attrs:{href:"#_3-3-docker-common-commands-can-be-omitted"}},[e._v("3.3 Docker common commands (can be omitted)")])])])]),a("li",[a("a",{attrs:{href:"#_4-apache-doris-compilation-and-deployment"}},[e._v("4 Apache Doris Compilation and Deployment")]),a("ul",[a("li",[a("a",{attrs:{href:"#_4-1-compiling-apache-doris"}},[e._v("4.1 Compiling Apache Doris")])])])])])]),a("p"),e._v(" "),a("h2",{attrs:{id:"_1-deployment-process"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-deployment-process"}},[e._v("#")]),e._v(" 1 Deployment process")]),e._v(" "),a("p",[e._v('*** This is the "Compilation" section, only for compilation. Deployment will be done by the "Deploy" section***')]),e._v(" "),a("ol",[a("li",[e._v("Configure the compilation environment")]),e._v(" "),a("li",[e._v("Get to know Docker")]),e._v(" "),a("li",[e._v("Install Docker")]),e._v(" "),a("li",[e._v("Docker basic commands")]),e._v(" "),a("li",[e._v("How to compile Doris")]),e._v(" "),a("li",[e._v("Two deployment methods of Doris\n"),a("ol",[a("li",[e._v("Standalone deployment")]),e._v(" "),a("li",[e._v("Docker Deployment")])])]),e._v(" "),a("li",[e._v("Doris Deployment FAQ")])]),e._v(" "),a("h2",{attrs:{id:"_2-tutorial-environment-just-view-on-demand"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-tutorial-environment-just-view-on-demand"}},[e._v("#")]),e._v(" 2 Tutorial environment (just view on demand)")]),e._v(" "),a("p",[e._v("The compilation process is all based on the Docker image for compilation, divided into different platforms just to facilitate the reduction of the cost of use for students willing to try to use or test the environment to build, whether you have a Mac book at hand, a Win computer, or a cloud Linux server, you can complete the compilation work.")]),e._v(" "),a("p",[e._v("Depending on your current system environment, you can select the following sections to read.")]),e._v(" "),a("ul",[a("li",[e._v("2.1 Linux")]),e._v(" "),a("li",[e._v("2.2 MaC")]),e._v(" "),a("li",[e._v("2.3 Windows")])]),e._v(" "),a("h3",{attrs:{id:"_2-1-linux-environment"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-linux-environment"}},[e._v("#")]),e._v(" 2.1 Linux environment")]),e._v(" "),a("p",[e._v("Cluster size: 3 Tencent Cloud servers")]),e._v(" "),a("p",[e._v("Cluster configuration: 1 node FE | 2 nodes BE (the number of nodes can be on demand, please refer to the recommendations in the Apache Doris official website deployment document)")]),e._v(" "),a("p",[e._v("Standalone specifications: 2C 4G")]),e._v(" "),a("p",[e._v("System version: CentOS 7.6")]),e._v(" "),a("p",[e._v("Java version: JDK1.8")]),e._v(" "),a("p",[e._v("Doris version: Apache Doris 0.15.0")]),e._v(" "),a("p",[e._v("Docker version: 20.10.11")]),e._v(" "),a("h4",{attrs:{id:"_2-1-1-cloud-server-environment-preparation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-1-cloud-server-environment-preparation"}},[e._v("#")]),e._v(" 2.1.1 Cloud server environment preparation")]),e._v(" "),a("p",[e._v("The newly acquired cloud server needs to do the following.")]),e._v(" "),a("ol",[a("li",[e._v("install CentOS 7.6 system image")]),e._v(" "),a("li",[e._v("modify the password to enter the system")]),e._v(" "),a("li",[e._v("remote connection to the server can be")])]),e._v(" "),a("h3",{attrs:{id:"_2-2-mac-environment"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-mac-environment"}},[e._v("#")]),e._v(" 2.2 Mac environment")]),e._v(" "),a("p",[e._v("Cluster size: 1 MacOS computer Virtual 4 Docker objects")]),e._v(" "),a("p",[e._v("Cluster configuration: 1 node FE | 3 nodes BE (the number of nodes can be on demand, see the recommendations in the official Apache Doris deployment documentation)")]),e._v(" "),a("p",[e._v("Standalone specifications: 2C 4G")]),e._v(" "),a("p",[e._v("System version: CentOS 7.6")]),e._v(" "),a("p",[e._v("Java version: JDK1.8")]),e._v(" "),a("p",[e._v("Doris version: Apache Doris 0.15.0")]),e._v(" "),a("p",[e._v("Docker version: 20.10.11")]),e._v(" "),a("h4",{attrs:{id:"_2-2-1-macos-environment-preparation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-1-macos-environment-preparation"}},[e._v("#")]),e._v(" 2.2.1 MacOS environment preparation")]),e._v(" "),a("ol",[a("li",[a("p",[e._v("Go to the official website of Docker to download the Docker-MacOS installation package")]),e._v(" "),a("p",[e._v("Download address: https://hub.docker.com/")])]),e._v(" "),a("li",[a("p",[e._v("Initial login, you need to register, after registration through the email link authentication")])]),e._v(" "),a("li",[a("p",[e._v("Download and install Docker Tools, after the initialization of Docker Tools, the color block of Docker Logo in the lower left corner turns green, which means the initialization is successful.")]),e._v(" "),a("img",{attrs:{src:e.$withBase("/images/blogs/doris-tutorial-compilation/image-20211221194520114.png"),alt:"image-20211221194520114"}})]),e._v(" "),a("li",[a("p",[e._v("There will be a code block in the Contalners/Apps Tab that says")]),e._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker")]),e._v(" run -d -p "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("80")]),e._v(":80 docker/getting-started\n")])])]),a("p",[e._v("Copy it and open Mac Terminal to run the first Docker image on your Mac (this image is not a Doris-related image)")])])]),e._v(" "),a("h3",{attrs:{id:"_2-3-windows-environment"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-windows-environment"}},[e._v("#")]),e._v(" 2.3 Windows environment")]),e._v(" "),a("p",[e._v("Cluster size: 1 Win computer Make 4 virtual machine objects")]),e._v(" "),a("p",[e._v("Cluster configuration: 1 node FE | 3 nodes BE (the number of nodes can be on demand, refer to the recommendations in the Apache Doris official website deployment documentation)")]),e._v(" "),a("p",[e._v("Standalone specifications: 4C 8G")]),e._v(" "),a("p",[e._v("System version: CentOS 7.6")]),e._v(" "),a("p",[e._v("Java version: JDK1.8")]),e._v(" "),a("p",[e._v("Doris version: Apache Doris 0.15.0")]),e._v(" "),a("p",[e._v("Docker version: 20.10.11")]),e._v(" "),a("h4",{attrs:{id:"_2-3-1-windows-environment-preparation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-1-windows-environment-preparation"}},[e._v("#")]),e._v(" 2.3.1 Windows environment preparation")]),e._v(" "),a("ul",[a("li",[a("p",[e._v("The computer needs to have VM virtual machine software (VMwareWorkstation) on it")])]),e._v(" "),a("li",[a("p",[e._v("Need to be prepared to download a good ISO image file of CentOS7")])]),e._v(" "),a("li",[a("p",[e._v("The computer configuration is best slightly better, easy to compile quickly")])])]),e._v(" "),a("p",[e._v("Why not apply Windows-Docker for virtual environment installation?")]),e._v(" "),a("p",[e._v("Because it is very tedious, will increase a lot of work, and there are many no common problems arise, not easy to write and read tutorials")]),e._v(" "),a("h4",{attrs:{id:"_2-3-2-virtual-machine-cluster-installation-and-deployment"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-2-virtual-machine-cluster-installation-and-deployment"}},[e._v("#")]),e._v(" 2.3.2 Virtual Machine Cluster Installation and Deployment")]),e._v(" "),a("h5",{attrs:{id:"_2-3-2-1-creating-virtual-machines-with-vms"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-2-1-creating-virtual-machines-with-vms"}},[e._v("#")]),e._v(" 2.3.2.1 Creating virtual machines with VMs")]),e._v(" "),a("ol",[a("li",[a("p",[e._v("Create a new virtual machine")]),e._v(" "),a("img",{attrs:{src:e.$withBase("/images/blogs/doris-tutorial-compilation/image-20211221195227111.png"),alt:""}})]),e._v(" "),a("li",[a("p",[e._v("Select Advanced")]),e._v(" "),a("img",{attrs:{src:e.$withBase("/images/blogs/doris-tutorial-compilation/image-20211221195250005.png"),alt:""}})]),e._v(" "),a("li",[a("p",[e._v("Select -Install Later when installing system sources")]),e._v(" "),a("img",{attrs:{src:e.$withBase("/images/blogs/doris-tutorial-compilation/image-20211221195340120.png"),alt:""}})]),e._v(" "),a("li",[a("p",[e._v("Select Linux-CentOS 7 64-bit when choosing a system")]),e._v(" "),a("img",{attrs:{src:e.$withBase("/images/blogs/doris-tutorial-compilation/image-20211221195424420.png"),alt:""}})]),e._v(" "),a("li",[a("p",[e._v("choose a larger processor, preferably more than 4 total cores (the number of cores determines the compilation speed)")]),e._v(" "),a("img",{attrs:{src:e.$withBase("/images/blogs/doris-tutorial-compilation/image-20211221195548551.png"),alt:""}})]),e._v(" "),a("li",[a("p",[e._v("slightly more memory too, more than 4G-8G")]),e._v(" "),a("p",[e._v("! "),a("a",{attrs:{href:"/images/blogs/doris-tutorial-compilation/image-20211221195624113.png"}})])]),e._v(" "),a("li",[a("p",[e._v("Select NAT network mode")]),e._v(" "),a("img",{attrs:{src:e.$withBase("/images/blogs/doris-tutorial-compilation/image-20211221195653102.png"),alt:""}})]),e._v(" "),a("li",[a("p",[e._v("Capacity is optional, 50GB or more is fine")]),e._v(" "),a("img",{attrs:{src:e.$withBase("/images/blogs/doris-tutorial-compilation/image-20211221200029323.png"),alt:""}})]),e._v(" "),a("li",[a("p",[e._v("Once created, select Edit Virtual Machine Settings")]),e._v(" "),a("img",{attrs:{src:e.$withBase("/images/blogs/doris-tutorial-compilation/image-20211221200137725.png"),alt:""}})]),e._v(" "),a("li",[a("p",[e._v("Set the system ISO mapping file")]),e._v(" "),a("img",{attrs:{src:e.$withBase("/images/blogs/doris-tutorial-compilation/image-20211221200346916.png"),alt:""}})]),e._v(" "),a("li",[a("p",[e._v("Start the virtual machine and install the system")])])]),e._v(" "),a("h5",{attrs:{id:"_2-3-2-2-configuring-the-vm-and-network-environment"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-2-2-configuring-the-vm-and-network-environment"}},[e._v("#")]),e._v(" 2.3.2.2 Configuring the VM and network environment")]),e._v(" "),a("p",[e._v("First you need to configure the virtual network on the VM")]),e._v(" "),a("ol",[a("li",[a("p",[e._v("Click "),a("code",[e._v("Edit Menu")]),e._v(", click "),a("code",[e._v("Virtual Network Editor")])]),e._v(" "),a("img",{attrs:{src:e.$withBase("/images/blogs/doris-tutorial-compilation/image-20211221203204574.png"),alt:""}})]),e._v(" "),a("li",[a("p",[e._v("Click Change Settings")]),e._v(" "),a("img",{attrs:{src:e.$withBase("/images/blogs/doris-tutorial-compilation/image-20211221203243631.png"),alt:""}})]),e._v(" "),a("li",[a("p",[e._v("Check the box as shown, then set the subnet IP address segment, the fourth segment is 0")]),e._v(" "),a("img",{attrs:{src:e.$withBase("/images/blogs/doris-tutorial-compilation/image-20211221203405005.png"),alt:""}})]),e._v(" "),a("li",[a("p",[e._v("Then click on NAT settings and modify the gateway IP. Note that both the gateway IP and the virtual machine IP should match the criteria of the subnet IP address segment, that is, the other IP address settings, the first three segments should be consistent with the subnet IP")]),e._v(" "),a("img",{attrs:{src:e.$withBase("/images/blogs/doris-tutorial-compilation/image-20211221203712731.png"),alt:""}})]),e._v(" "),a("li",[a("p",[e._v("All OK and apply")])]),e._v(" "),a("li",[a("p",[e._v("open the "),a("code",[e._v("Network and Internet")]),e._v(" of your host computer (this computer)")]),e._v(" "),a("img",{attrs:{src:e.$withBase("/images/blogs/doris-tutorial-compilation/image-20211221203847192.png"),alt:""}})]),e._v(" "),a("li",[a("p",[e._v("Right-click to edit the "),a("code",[e._v("VMnet8")]),e._v(" network card and open the properties")]),e._v(" "),a("img",{attrs:{src:e.$withBase("/images/blogs/doris-tutorial-compilation/image-20211221203955970.png"),alt:""}})]),e._v(" "),a("li",[a("p",[e._v("Select the IPv4 protocol and click Properties")]),e._v(" "),a("img",{attrs:{src:e.$withBase("/images/blogs/doris-tutorial-compilation/image-20211221204030083.png"),alt:""}})]),e._v(" "),a("li",[a("p",[e._v("Modify the items inside")]),e._v(" "),a("img",{attrs:{src:e.$withBase("/images/blogs/doris-tutorial-compilation/image-20211221204116846.png"),alt:""}}),e._v(" "),a("p",[e._v("Note that")]),e._v(" "),a("ul",[a("li",[e._v("IP address filling rules are the same as above, need to meet the subnet IP address segment rules")]),e._v(" "),a("li",[e._v("The subnet mask should be the same as the subnet mask set in NAT mode in the VM virtual network settings.")]),e._v(" "),a("li",[e._v('Select the default gateway address set in "item 4".')])]),e._v(" "),a("p",[e._v("Just make sure")])])]),e._v(" "),a("p",[e._v("After installing the virtual machine, log into the system and do the following things:")]),e._v(" "),a("ol",[a("li",[a("p",[e._v("Modify the NIC configuration to allow the system to connect to the host and external network")]),e._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("vi")]),e._v(" /etc/sysconfig/network-scripts/ifcfg-ens33 "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#The last one is your network card name, change it according to your personal situation")]),e._v("\n")])])]),a("img",{attrs:{src:e.$withBase("/images/blogs/doris-tutorial-compilation/image-20211221202312977.png"),alt:""}}),e._v(" "),a("p",[e._v("Keep and add the following entries.")]),e._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("BOOTPROTO")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("static "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Network address assignment method is static")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("NAME")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("ens33 "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# NIC alias")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("DEVICE")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("ens33 "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# NIC driver name")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("ONBOOT")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("yes "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Whether to activate the NIC at system boot")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("IPADDR")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("192.168")]),e._v(".201.101 "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# local IP address, do not duplicate with the host VMnet8 IP address, to meet the rules of the subnet IP segment")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("GATEWAY")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("192.168")]),e._v(".201.2 "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Gateway address, the value in NAT mode in the virtual network settings")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("NETMASK")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("255.255")]),e._v(".255.0 "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Subnet mask")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("DNS1")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("8.8")]),e._v(".8.8 "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# DNS server")]),e._v("\n")])])]),a("p",[a("code",[e._v("Shift + ZZ")]),e._v(" Save and exit")]),e._v(" "),a("p",[e._v("Reboot the network device and load the parameters we just finished modifying")]),e._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("service")]),e._v(" network restart\n")])])]),a("img",{attrs:{src:e.$withBase("/images/blogs/doris-tutorial-compilation/image-20211221204709603.png"),alt:""}}),e._v(" "),a("p",[e._v("Then ping the gateway, the host IP and the external network respectively")]),e._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("ping")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("192.168")]),e._v(".201.2\n"),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("ping")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("192.168")]),e._v(".3.5\n"),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("ping")]),e._v(" www.baidu.com\n")])])]),a("p",[e._v("If they all ping successfully, then we can prove that our configuration is correct")])]),e._v(" "),a("li",[a("p",[e._v("modify the firewall settings, close the firewall")]),e._v(" "),a("p",[e._v("Because it is a virtual machine, and the entire independent use, so directly shut down the virtual machine firewall is fine")]),e._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Check the firewall status")]),e._v("\nsystemctl status firewalld.service\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Shut down the firewall")]),e._v("\nsystemctl stop firewalld.service\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Disable the firewall server on boot")]),e._v("\nsystemctl disable firewalld.service\n")])])])]),e._v(" "),a("li",[a("p",[e._v("install wget tool")]),e._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[e._v("yum -y "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("install")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("wget")]),e._v("\n")])])])])]),e._v(" "),a("p",[e._v("At this point, the virtual machine of Win platform and CentOS7 system are configured and can be compiled normally")]),e._v(" "),a("h2",{attrs:{id:"_3-docker-awareness-and-deployment"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-docker-awareness-and-deployment"}},[e._v("#")]),e._v(" 3 Docker Awareness and Deployment")]),e._v(" "),a("h3",{attrs:{id:"_3-1-docker-awareness"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-docker-awareness"}},[e._v("#")]),e._v(" 3.1 Docker Awareness")]),e._v(" "),a("p",[e._v("Docker is an open source application container engine that allows developers to package their applications and dependency packages into a portable image that can then be distributed to any popular Linux or Windows OS machine, and also virtualized. Containers are completely using the sandbox mechanism and will not have any interfaces with each other.")]),e._v(" "),a("p",[e._v("In short, it can be analogous to the "),a("strong",[e._v("virtual machine technology")]),e._v(" that we often use in the learning process, but compared to virtual machines, Docker "),a("strong",[e._v("extremely")]),e._v(" lightweight and simple, through containerized deployment, you can quickly isolate a small and complete system container with resources, independent systems, and independent environment, we can manipulate our Linux system to create a Docker container for compiling Doris environment by simply installing and using simple commands.")]),e._v(" "),a("p",[a("em",[a("strong",[e._v("------ recommends the following must read ------")])])]),e._v(" "),a("p",[e._v("So why not compile it directly (under CentOS or Redhat systems), instead of building an environment container with Docker for compilation?")]),e._v(" "),a("p",[e._v("Very simple, afraid of various pre-dependent environment, compile under the user's own system may encounter no dependencies, does not exist to install the source, can not install a variety of problems (this environment caused by a variety of parameters is time-consuming and no value and meaning), in order to allow users to reduce unnecessary trouble in the compilation process, to improve the success rate of compilation, so, Apache Doris officially provides a Docker image they have configured the basic environment, just pull down from the cloud by a line of command, and then use a line of command into the container to compile ~")]),e._v(" "),a("p",[e._v("**Summary is that compiling with Docker greatly simplifies the compilation process, greatly enhances compilation reliability, and greatly saves operation and maintenance time. ** Next, start deploying Docker components.")]),e._v(" "),a("p",[e._v("Next, start deploying Docker components to the server system.")]),e._v(" "),a("h3",{attrs:{id:"_3-2-docker-deployment"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-docker-deployment"}},[e._v("#")]),e._v(" 3.2 Docker deployment")]),e._v(" "),a("ol",[a("li",[a("p",[e._v("Docker requires a kernel version higher than "),a("code",[e._v("3.10")]),e._v(" on CentOS systems, first check if the kernel version of the system meets")]),e._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("uname")]),e._v(" -r\n")])])])]),e._v(" "),a("li",[a("p",[e._v("Log in with "),a("code",[e._v("root")]),e._v(" privileges and make sure the yum package is updated to the latest")]),e._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" yum update\n")])])])]),e._v(" "),a("li",[a("p",[e._v("If you have an older version installed, uninstall it first")]),e._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" yum remove "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker")]),e._v(" docker-common docker-selinux docker-engine\n")])])])]),e._v(" "),a("li",[a("p",[e._v("install the required packages, yum-util provides yum-config-manager function, the other two are devicemapper driver dependencies")]),e._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" yum "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("install")]),e._v(" -y yum-utils device-mapper-persistent-data lvm2\n")])])])]),e._v(" "),a("li",[a("p",[e._v("set yum source (to speed up yum downloads)")]),e._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo\n")])])])]),e._v(" "),a("li",[a("p",[e._v("View all docker versions in all repositories and select a specific version to install, usually you can install the latest version directly")]),e._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[e._v("yum list docker-ce --showduplicates "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("sort")]),e._v(" -r\n")])])])]),e._v(" "),a("li",[a("p",[e._v("Install docker")]),e._v(" "),a("ul",[a("li",[a("p",[e._v("Install the latest stable version")]),e._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" yum "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("install")]),e._v(" docker-ce -y "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#Install the latest stable version, because the repo only opens the stable repository by default")]),e._v("\n")])])])]),e._v(" "),a("li",[a("p",[e._v("Install the specified version")]),e._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" yum "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("install")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("FQPN"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" -y\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Example.")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" yum "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("install")]),e._v(" docker-ce-20.10.11.ce -y\n")])])])])])]),e._v(" "),a("li",[a("p",[e._v("start and add bootstrap")]),e._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" systemctl start "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#start docker")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" systemctl "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("enable")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#Add boot to boot")]),e._v("\n")])])])]),e._v(" "),a("li",[a("p",[e._v("Check the Version to verify if the installation is successful")]),e._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker")]),e._v(" version\n")])])]),a("p",[e._v("If the Client and Server parts appear, the installation is successful.")])])]),e._v(" "),a("h3",{attrs:{id:"_3-3-docker-common-commands-can-be-omitted"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-docker-common-commands-can-be-omitted"}},[e._v("#")]),e._v(" 3.3 Docker common commands (can be omitted)")]),e._v(" "),a("p",[e._v("This piece can be seen or not, see your basic use of Docker will be OK, do not see also does not prevent the next compilation")]),e._v(" "),a("ul",[a("li",[a("p",[e._v("View the currently running Docker image")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("docker ps\n")])])])]),e._v(" "),a("li",[a("p",[e._v("Go to a Docker image")]),e._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("exec")]),e._v(" -it "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("mirrorName"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" /bin/bash\n")])])])]),e._v(" "),a("li",[a("p",[e._v("View the pulled mirrors for the current machine")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("docker images\n")])])])]),e._v(" "),a("li",[a("p",[e._v("Run the specified image to create a container")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("docker run -p local mapping port:mirror mapping port -d --name start image name -e image start parameters image name:image version number\n")])])])])]),e._v(" "),a("h2",{attrs:{id:"_4-apache-doris-compilation-and-deployment"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-apache-doris-compilation-and-deployment"}},[e._v("#")]),e._v(" 4 Apache Doris Compilation and Deployment")]),e._v(" "),a("blockquote",[a("p",[e._v("We won't go into details about Apache Doris, but we will go straight to the point - compiling Doris source code and generating a system-executable application.")])]),e._v(" "),a("h3",{attrs:{id:"_4-1-compiling-apache-doris"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-compiling-apache-doris"}},[e._v("#")]),e._v(" 4.1 Compiling Apache Doris")]),e._v(" "),a("h4",{attrs:{id:"_4-1-1-pulling-images"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-1-pulling-images"}},[e._v("#")]),e._v(" 4.1.1 Pulling images")]),e._v(" "),a("p",[e._v("In the previous step, we have successfully deployed the Docker component on "),a("code",[e._v("CentOS 7.6")]),e._v(" system. Now, we need to pull the official Apache Doris environment image from the image source for compiling Doris source code.")]),e._v(" "),a("ul",[a("li",[e._v("Pull the image")])]),e._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker")]),e._v(" pull apache/incubator-doris:build-env-for-0.15.0 "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#This is version 0.15.0")]),e._v("\n")])])]),a("img",{attrs:{src:e.$withBase("/images/blogs/doris-tutorial-compilation/image-20211221190909871.png"),alt:""}}),e._v(" "),a("ul",[a("li",[e._v("After a successful pull, check the list of mirrors to see if they were successfully pulled")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("docker images\n")])])]),a("ul",[a("li",[e._v("If there is a red image circled below, the image is downloaded successfully")])]),e._v(" "),a("img",{attrs:{src:e.$withBase("/images/blogs/doris-tutorial-compilation/image-20211221190954677.png"),alt:""}}),e._v(" "),a("ul",[a("li",[e._v("If the pull is successful, run the run command and enter the Docker image")])]),e._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#Don't copy and paste this sentence yet, read the following description")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker")]),e._v(" run -it apache/incubator-doris:build-env-for-0.15.0\n")])])]),a("p",[e._v("After entering the mirror this way, all operations done are resource-isolated, and resources disappear as you exit the mirror.")]),e._v(" "),a("p",[e._v("It is recommended to run the mirror with the local Doris source directory mounted, so that the compiled output binaries are stored in the host and do not disappear when the mirror is exited.")]),e._v(" "),a("p",[e._v("It is also recommended to mount the "),a("code",[e._v(".m2")]),e._v(" directory of maven in the mirror to the host directory to prevent repeated downloads of maven dependencies each time the mirror is started.")]),e._v(" "),a("p",[e._v("The following commands need to be customized according to your needs")]),e._v(" "),a("p",[e._v("Here, after creating the location for the host to download the source code, you can go to section "),a("code",[e._v("4.1.3.1")]),e._v(" and download the source code to that folder first, and then execute the following statement")]),e._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker")]),e._v(" run --name apache-doris-0.15.0 -it -v /root/.m2:/root/.m2 -v Location where the "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("host")]),e._v(" downloaded the "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("source")]),e._v(" code: the location of the "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("source")]),e._v(" code you want to see "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("in")]),e._v(" the container apache/incubator-doris:build-env-for-0.15.0\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Example")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# First go to section 4.1.3.1 wget and download the source code to the host /opt/doris folder and run the following command")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker")]),e._v(" run --name apache-doris-0.15.0 -it -v /root/.m2:/root/.m2 -v /opt/doris:/opt/doris apache/incubator-doris:build-env-for-0.15.0\n")])])]),a("p",[e._v("If the following command header appears after execution, the mirror has been successfully entered")]),e._v(" "),a("img",{attrs:{src:e.$withBase("/images/blogs/doris-tutorial-compilation/image-20211220181157554.png"),alt:""}}),e._v(" "),a("h4",{attrs:{id:"_4-1-2-specifying-the-jdk-version-on-demand"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-2-specifying-the-jdk-version-on-demand"}},[e._v("#")]),e._v(" 4.1.2 Specifying the JDK version (on-demand)")]),e._v(" "),a("p",[e._v("After completing pulling and entering the image, this next step is quite important, "),a("strong",[e._v("this step is about the JDK version you will subsequently use")]),e._v(".")]),e._v(" "),a("p",[e._v("In the official compiled environment image we pull down, we are actually given two sets of JDKs to choose from, one for JDK8 and one for JDK11, the default is JDK11, so we modify it as needed.")]),e._v(" "),a("img",{attrs:{src:e.$withBase("/images/blogs/doris-tutorial-compilation/image-20211221120403558.png"),alt:""}}),e._v(" "),a("p",[e._v("If you want to use JDK8 for your subsequent work, please execute the following code in order to change the JDK version")]),e._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# execute as needed")]),e._v("\nalternatives --set java java-1.8.0-openjdk.x86_64\nalternatives --set javac java-1.8.0-openjdk.x86_64\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("export")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("JAVA_HOME")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("/usr/lib/jvm/java-1.8.0\n")])])]),a("img",{attrs:{src:e.$withBase("/images/blogs/doris-tutorial-compilation/image-20211221120445833.png"),alt:""}}),e._v(" "),a("p",[e._v("If you want to use JDK11 in the future, then either you should not perform any operation in the first place, because the default is JDK11. If you perform the above command to switch to JDK8 and want to cut back, then use the following command to switch to JDK11")]),e._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Execute on demand")]),e._v("\nalternatives --set java java-11-openjdk.x86_64\nalternatives --set javac java-11-openjdk.x86_64\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("export")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("JAVA_HOME")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("/usr/lib/jvm/java-11\n")])])]),a("img",{attrs:{src:e.$withBase("/images/blogs/doris-tutorial-compilation/image-20211221120543215.png"),alt:""}}),e._v(" "),a("h4",{attrs:{id:"_4-1-3-compiling-doris"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-3-compiling-doris"}},[e._v("#")]),e._v(" 4.1.3 Compiling Doris")]),e._v(" "),a("h5",{attrs:{id:"_4-1-3-1-downloading-the-source-code-and-unpacking"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-3-1-downloading-the-source-code-and-unpacking"}},[e._v("#")]),e._v(" 4.1.3.1 Downloading the source code and unpacking")]),e._v(" "),a("ul",[a("li",[e._v("Use the wget command to download")])]),e._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Download example (with version 0.15.0 as an example)")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("wget")]),e._v(" https://downloads.apache.org/incubator/doris/0.15.0-incubating/apache-doris-0.15.0-incubating-src.tar.gz\n")])])]),a("ul",[a("li",[e._v("Or use the following command (github pull, preferably with a ladder)")])]),e._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("git")]),e._v(" clone https://github.com/apache/incubator-doris.git\n")])])]),a("p",[e._v("After downloading, get the source tarball and execute the following command to extract it")]),e._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("tar")]),e._v(" -zxvf apache-doris-0.15.0-incubating-src.tar.gz \n")])])]),a("p",[e._v("After unzipping, get the folder "),a("code",[e._v("apache-doris-0.15.0-incubating-src")])]),e._v(" "),a("p",[e._v("Execute the following command to enter the directory")]),e._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("cd")]),e._v(" apache-doris-0.15.0-incubating-src\n")])])]),a("h5",{attrs:{id:"_4-1-3-2-compiling-source-code"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-3-2-compiling-source-code"}},[e._v("#")]),e._v(" 4.1.3.2 Compiling source code")]),e._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Before copying and pasting this command, you need to read the following text")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("sh")]),e._v(" build.sh\n")])])]),a("p",[e._v("If the Docker version of the pulled Doris build environment is "),a("code",[e._v("build-env-1.4.2")]),e._v(" or "),a("code",[e._v("build-env-for-0.15.0")]),e._v(" (the version can be checked with the "),a("code",[e._v("docker images")]),e._v(" command under CentOS as described in section "),a("code",[e._v("4.1.1")]),e._v(")")]),e._v(" "),a("img",{attrs:{src:e.$withBase("/images/blogs/doris-tutorial-compilation/image-20211220182911446.png"),alt:""}}),e._v(" "),a("p",[e._v("This is because the 1.4.2 image has been upgraded to "),a("code",[e._v("thrift(0.9 -> 0.13)`, and you need to force the new version of")]),e._v("thrift` to generate the code file with the --clean command, otherwise incompatible code will appear.")]),e._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("sh")]),e._v(" build.sh --clean --be --fe --ui -j2\n")])])]),a("p",[e._v("Next, you can go do other things, the tutorial test machine is using "),a("code",[e._v("2C 4G 8M")]),e._v(" to compile, taking "),a("strong",[e._v("two hours")]),e._v(", during the period if you find the following chart, and run super slow, is normal, the node do not continue to carry out other actions, just wait for the completion, so as not to occur inexplicable errors.")]),e._v(" "),a("img",{attrs:{src:e.$withBase("/images/blogs/doris-tutorial-compilation/image-20211220162256154.png"),alt:""}}),e._v(" "),a("p",[e._v("The following message will prove that the compilation was successful")]),e._v(" "),a("img",{attrs:{src:e.$withBase("/images/blogs/doris-tutorial-compilation/image-20211220184120563.png"),alt:""}}),e._v(" "),a("h5",{attrs:{id:"_4-1-3-3-occasional-error"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-3-3-occasional-error"}},[e._v("#")]),e._v(" 4.1.3.3 Occasional error")]),e._v(" "),a("p",[e._v("The compilation ended up with Failed, which means that the compilation failed with the error message")]),e._v(" "),a("img",{attrs:{src:e.$withBase("/images/blogs/doris-tutorial-compilation/image-20211220183806318.png"),alt:""}}),e._v(" "),a("p",[e._v("where the main description is: "),a("code",[e._v("ninja: build stopped: subcommand failed.")])]),e._v(" "),a("p",[e._v("The reason for this error is probably due to some problem in the system itself, but it may also be due to insufficient memory used during compilation, which can be solved by using the following solution")]),e._v(" "),a("p",[e._v("The solution is to add a parameter at compile time and execute the following statement")]),e._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("sh")]),e._v(" build.sh --clean --be --fe --ui -j2\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# If it's not the first build, use")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("sh")]),e._v(" build.sh -j2\n")])])]),a("p",[e._v("If you still get the error, you need to reset the server system and start the compilation from scratch again~")]),e._v(" "),a("h5",{attrs:{id:"_4-1-3-4-copying-resources"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-3-4-copying-resources"}},[e._v("#")]),e._v(" 4.1.3.4 Copying resources")]),e._v(" "),a("p",[e._v("After successful compilation, the "),a("code",[e._v("output")]),e._v(" folder will be created in the "),a("code",[e._v("apache-doris-0.15.0-incubating-src")]),e._v(" directory (or the current directory if nothing else is done)")]),e._v(" "),a("img",{attrs:{src:e.$withBase("/images/blogs/doris-tutorial-compilation/image-20211220184756120.png"),alt:""}}),e._v(" "),a("p",[e._v("Execute the view directory command to see the contents of this folder")]),e._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[e._v("ll output\n")])])]),a("p",[e._v("The following folders need to be in the directory for the compilation to be successful: "),a("code",[e._v("fe")]),e._v(", "),a("code",[e._v("be")])]),e._v(" "),a("ul",[a("li",[a("p",[e._v("Linux cloud server.")]),e._v(" "),a("img",{attrs:{src:e.$withBase("/images/blogs/doris-tutorial-compilation/image-20211221201459225.png"),alt:""}})]),e._v(" "),a("li",[a("p",[e._v("Win platform")]),e._v(" "),a("img",{attrs:{src:e.$withBase("/images/blogs/doris-tutorial-compilation/image-20211221201650493.png"),alt:""}})]),e._v(" "),a("li",[a("p",[e._v("MacOS platform")]),e._v(" "),a("img",{attrs:{src:e.$withBase("/images/blogs/doris-tutorial-compilation/image-20211221201751774.png"),alt:""}})])]),e._v(" "),a("p",[e._v("At this point, all compilation steps are complete and successful~")]),e._v(" "),a("p",[e._v("We need to copy the FE folder and BE folder to the host, this is the crystallization of our compilation, which is equivalent to the incubator successfully hatching the chick, we need to take the chick out of the incubator to feed and do subsequent operations~")]),e._v(" "),a("p",[a("strong",[e._v("Linux systems and Mac systems execute commands under the host computer")])]),e._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("cp")]),e._v(" container name: the path of the "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("file")]),e._v(" to be copied inside the container to be copied to the corresponding path "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("in")]),e._v(" the "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("host")]),e._v(" \n")])])]),a("p",[e._v("Note that the container name here is the name of the currently running Docker container after executing the "),a("code",[e._v("docker ps")]),e._v(" command "),a("strong",[e._v("on the host")])]),e._v(" "),a("img",{attrs:{src:e.$withBase("/images/blogs/doris-tutorial-compilation/image-20211220192355582.png"),alt:""}}),e._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# For example")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("cp")]),e._v(" ed22cbfd325a:/~/apache-doris-0.15.0-incubating-src/output/ /opt/\n")])])]),a("p",[e._v("At this point, Doris compilation is complete.")])])}),[],!1,null,null,null);t.default=o.exports}}]);